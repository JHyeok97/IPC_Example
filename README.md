# IPC(Inter-Process Communication)
> 프로세스 간에 정보를 주고 받는 것


## IPC 종류
###  PIPE
-----------------------------------
![](https://velog.velcdn.com/images/jahyuk244/post/f8df2a47-3f46-4619-b48b-e9fa0be30480/image.png)
통신을 위한 메모리 공간(버퍼)를 생성하여 프로세스가 데이터를 주고 받게 함

#### 익명 파이프(Anonymous-PIPE)

- 통신할 프로세스가 명확하게 알 수 있는 경우 사용
  - 부모-자식 or 형제 프로세스 간 통신에 사용
  - 외부 프로세스에서 사용할 수 없음
- 파이프는 두 개의 프로세스를 연결하고, 하나의 프로세스는 데이터를 쓰기만하고, 다른 하나는 읽기만 가능
- 한 쪽 방향으로만 통신이 가능한 파이프의 특징 때문에 반이중(Half-Duplex) 통신 이라고 부르기도 함
  - 프로세스가 읽기와 쓰기 통신을 해야한다면, PIPE 두 개를 만들어야 하므로 구현이 복잡해질 수 있음
  - 전이중 통신을 고려해야 할 상황이라면 낭비가 심하기 때문에 좋은 선택이 아님
- 간단하게 사용 가능



#### 네임드 파이프(Named-PIPE)

- 전혀 모르는 상태의 프로세스들 사이의 통신에 사용
- 익명 파이프의 확장된 상태로 부모 프로세스와 무관한 다른 프로세스도 통신 가능
    - 프로세스 통신을 위해 이름이 있는 파일을 사용하기 때문에 가능
    - FIFO를 이용해 서로 관련 없는 프로세스 간 통신에 사용 ⇒ 외부 프로세스와 통신 가능
- 반이중 통신 → 전이중 통신을 위해서는 익명 파이프처럼 2개를 만들어야 가능

    
### Message Queue
--------------------------------
![](https://velog.velcdn.com/images/jahyuk244/post/e90556f0-0a9f-416e-aba8-efc561ed3394/image.png)

- 구조체 기반으로 통신
- FIFO 구조
- msgtype에 따라 다른 구조체를 가져올 수 있음
- 사용할 데이터에 번호를 붙이면서 여러 프로세스가 동시에 데이터를 쉽게 다룰 수 있다.
- 메시지의 접근을 위해서는 키(key)가 필요하다.


### Shared Memory
---------------------
![](https://velog.velcdn.com/images/jahyuk244/post/2c1d4daf-f586-44a9-b279-f7d6740ba560/image.png)


- 공유 메모리는 프로세스 간 메모리 영역을 공유해서 사용할 수 있도록 허용
- 프로세스가 공유 메모리 할당을 커널에 요청하면 커널은 해당 프로세스에 메모리 공간을 할당한다
- 이후 어떤 프로세스건 해당 메모리 영역에 접근할 수 있음
    - 공유 메모리가 각 프로세스에게 첨부하는 방식으로 작동
    - 각 프로세스가 메모리 영역에 첨부
- 프로세스간 Read,Write 모두 필요로 할 때 사용
- 대량의 정보를 다수의 프로세스에게 배포 가능
- 중개자 없이 곧바로 메모리에 접근할 수 있기 때문에 모든 IPC 중에서 가장 빠르게 작동할 수 있음
- 메시지 전달 방식이 아니기 때문에 데이터를 읽어야하는 시점을 알 수 없다.
- 커널 설정에 종속적이기 때문에 사용하기전에 커널에서 허용하고 있는 공유 메모리 사이즈를 확인해야한다.

### Socket
------------------------
![](https://velog.velcdn.com/images/jahyuk244/post/ce5445ed-030d-47af-97cf-7e21d9344bca/image.png)

- TCP 소켓과 동일한 API로 데이터를 주고 받을 수 있는 local file 기반의 소켓

- TCP socket 과 차이점은 local host 의 process 간의 통신이므로 속도가 매우 빠르고 메모리 소모가 적음

- socket 을 생성할 때 sockaddr_un 이라는 구조체를 사용하는 것 외에는 일반적인 소켓을 다루는 것과 동일하므로 UDS로 구성해 놓은 후에 성능이나 보안상의 문제로 서버를 클라이언트와 분리하기가 매우 용이

- 전이중(Full Duplex,양방향) 통신

- 중대형 애플리케이션에서 주로 사용
